<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Powerpuff Girls Pong - Registration</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">
    <link href="./dist/output.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Comic Sans MS', 'Comic Sans', cursive;
        }
        .font-logo {
            font-family: 'Luckiest Guy', 'Comic Sans MS', cursive;
        }
        #avatarPicker img {
            transition: transform 0.2s cubic-bezier(.4,2,.6,1), box-shadow 0.2s;
        }
        #avatarPicker img:hover {
            transform: scale(1.18) rotate(-8deg);
            box-shadow: 0 8px 32px 0 rgba(255,105,180,0.25);
            z-index: 2;
        }
        .page {
            display: none !important;
        }
        .page.active {
            display: block !important;
        }
        .section {
            display: none !important;
        }
        .section.active {
            display: block !important;
        }
        
        /* Game Options Animations */
        .game-option {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        
        .game-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .game-option:hover::before {
            left: 100%;
        }
        
        .game-option:hover {
            transform: scale(1.05) translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .game-option .icon-circle {
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .game-option:hover .icon-circle {
            transform: scale(1.2) rotate(15deg);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        /* Floating animation for icons */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .game-option:hover .icon-circle {
            animation: float 2s ease-in-out infinite;
        }
        
        /* Pulse effect for tournament icon */
        .game-option[data-game-type="tournament"]:hover .icon-circle {
            animation: float 2s ease-in-out infinite, pulse 1s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1.2) rotate(15deg); }
            50% { transform: scale(1.3) rotate(15deg); }
        }
        
        /* Background image classes */
        .bg-home {
            background-image: url('imgs/powerpuff-bg.png') !important;
            background-size: cover !important;
            background-position: center !important;
            background-repeat: no-repeat !important;
            background-attachment: fixed !important;
        }
        
        .bg-friends {
            background-image: url('imgs/untitled-design.png') !important;
            background-size: cover !important;
            background-position: center !important;
            background-repeat: no-repeat !important;
            background-attachment: fixed !important;
        }
        
        .bg-profile {
            background-image: url('imgs/20250905_111657_0000.png') !important;
            background-size: cover !important;
            background-position: center !important;
            background-repeat: no-repeat !important;
            background-attachment: fixed !important;
        }
        
        .bg-game-options {
            background-image: url('imgs/bg.md') !important;
            background-size: cover !important;
            background-position: center !important;
            background-repeat: no-repeat !important;
            background-attachment: fixed !important;
        }

        /* Elegant glass morphism enhancements - Medium-dark version */
        .glass-card {
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }
        
        .glass-card:hover {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 12px 40px 0 rgba(0, 0, 0, 0.4);
        }
        
        /* Medium-dark backgrounds for all containers */
        .bg-gray-600\/50 {
            background-color: rgba(0, 0, 0, 0.4) !important;
        }
        
        .bg-gray-700\/60 {
            background-color: rgba(0, 0, 0, 0.45) !important;
        }
        
        .bg-white\/20 {
            background-color: rgba(0, 0, 0, 0.3) !important;
        }
        
        /* Light navigation bar background */
        nav.bg-white\/20 {
            background-color: rgba(255, 255, 255, 0.2) !important;
        }
        
        /* Dark navigation links styling */
        nav ul li a {
            color: rgba(0, 0, 0, 0.8) !important;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5) !important;
        }
        
        nav ul li a:hover {
            color: rgba(0, 0, 0, 1) !important;
            text-shadow: 0 2px 4px rgba(255, 255, 255, 0.7) !important;
        }
        
        /* Subtle text shadow for better readability */
        .text-shadow {
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        /* Smooth transitions for all interactive elements */
        * {
            transition: all 0.2s ease-in-out;
        }
        
        /* Enhanced button hover effects */
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        /* Elegant input focus states */
        input:focus {
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="min-h-screen">
    <div id="app">
        <!-- Modern Pop-up Notification System -->
        <div id="notificationOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-[9999] hidden flex items-center justify-center" style="position: fixed !important; z-index: 9999 !important; backdrop-filter: none !important; -webkit-backdrop-filter: none !important; filter: none !important;">
            <div id="notificationCard" class="bg-white rounded-lg shadow-2xl p-6 max-w-md mx-4 transform scale-95 opacity-0 transition-all duration-300 relative z-[10000]" style="position: relative !important; z-index: 10000 !important; backdrop-filter: none !important; -webkit-backdrop-filter: none !important; filter: none !important; background: white !important; color: black !important;">
                <div class="flex items-center mb-4">
                    <div id="notificationIcon" class="w-8 h-8 rounded-full mr-3 flex items-center justify-center">
                        <!-- Icon will be set by JavaScript -->
                    </div>
                    <h3 id="notificationTitle" class="text-lg font-bold text-gray-800"></h3>
                </div>
                <p id="notificationMessage" class="text-gray-600 mb-4"></p>
                <button id="notificationClose" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors">
                    OK
                </button>
            </div>
        </div>
        
        <!-- Status Messages (keeping for backward compatibility) -->
        <div id="status" class="fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 hidden"></div>
        
        <!-- Registration Page -->
        <div id="registrationPage" class="page active bg-registration-login">
            <div class="container mx-auto px-4 py-8">
                <div class="text-center mb-8">
                    <img src="imgs/logo.png" alt="Powerpuff Girls Logo" class="mx-auto h-32 mb-4">
                    <h1 class="text-6xl font-logo mb-4 drop-shadow-2xl text-shadow animate-bounce-slow" style="color: #FF69B4 !important;">Welcome to pong!</h1>
                </div>

                <div class="max-w-md mx-auto bg-gray-600/50 rounded-2xl p-8 border border-white/30 shadow-2xl">
                    <h2 class="text-4xl font-logo text-powerpuff-pink mb-6 text-center drop-shadow-lg">Create Your Account</h2>
                    
                    <form id="registrationForm" class="space-y-6">
                        <div>
                            <label for="regUsername" class="block text-white font-bold mb-2">Username</label>
                            <input type="text" id="regUsername" placeholder="Enter your username" required 
                                   class="w-full px-4 py-3 rounded-lg border-2 border-powerpuff-pink bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple text-lg">
                        </div>
                        
                        <div>
                            <label for="regEmail" class="block text-white font-bold mb-2">Email</label>
                            <input type="email" id="regEmail" placeholder="Enter your email" required 
                                   class="w-full px-4 py-3 rounded-lg border-2 border-powerpuff-pink bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple text-lg">
                        </div>
                        
                        <div>
                            <label for="regPassword" class="block text-white font-bold mb-2">Password</label>
                            <input type="password" id="regPassword" placeholder="Enter your password" required 
                                   class="w-full px-4 py-3 rounded-lg border-2 border-powerpuff-pink bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple text-lg">
                            <div id="passwordRequirements" class="mt-2 text-sm text-white">
                                <div class="flex items-center mb-1">
                                    <span id="lengthCheck" class="mr-2">❌</span>
                                    <span>At least 8 characters</span>
                                </div>
                                <div class="flex items-center mb-1">
                                    <span id="lowercaseCheck" class="mr-2">❌</span>
                                    <span>One lowercase letter</span>
                                </div>
                                <div class="flex items-center mb-1">
                                    <span id="uppercaseCheck" class="mr-2">❌</span>
                                    <span>One uppercase letter</span>
                                </div>
                                <div class="flex items-center mb-1">
                                    <span id="numberCheck" class="mr-2">❌</span>
                                    <span>One number</span>
                                </div>
                                <div class="flex items-center mb-1">
                                    <span id="specialCheck" class="mr-2">❌</span>
                                    <span>One special character</span>
                                </div>
                            </div>
                        </div>
                        
                        <button type="submit" class="w-full bg-powerpuff-pink hover:bg-powerpuff-purple text-white font-bold py-4 px-6 rounded-lg text-xl transition-colors">
                            Create Account
                        </button>
                    </form>
                    
                    <div class="text-center mt-6">
                        <p class="text-white">
                            Already have an account? 
                            <button id="showLoginPage" class="text-powerpuff-blue hover:text-powerpuff-purple underline font-bold cursor-pointer">Login here</button>
                        </p>
                    </div>

                    <!-- Status Messages -->
                    <div id="registrationStatus" class="mt-4 text-center hidden"></div>
                </div>
            </div>
        </div>

        <!-- Login Page -->
        <div id="loginPage" class="page bg-registration-login">
            <div class="container mx-auto px-4 py-8">
                <div class="text-center mb-8">
                    <img src="imgs/logo.png" alt="Powerpuff Girls Logo" class="mx-auto h-32 mb-4">
                    <h1 class="text-6xl font-logo mb-4 drop-shadow-2xl text-shadow animate-bounce-slow" style="color: #FF69B4 !important;">Ready to play some Pong?</h1>
                </div>

                <div class="max-w-md mx-auto bg-gray-600/50 rounded-2xl p-8 border border-white/30 shadow-2xl">
                    <h2 class="text-4xl font-logo text-powerpuff-blue mb-6 text-center drop-shadow-lg">Login</h2>
                    
                    <form id="loginForm" class="space-y-6">
                        <div>
                            <label for="loginEmail" class="block text-white font-bold mb-2">Email</label>
                            <input type="email" id="loginEmail" placeholder="Enter your email" required 
                                   class="w-full px-4 py-3 rounded-lg border-2 border-powerpuff-blue bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple text-lg">
                        </div>
                        
                        <div>
                            <label for="loginPassword" class="block text-white font-bold mb-2">Password</label>
                            <input type="password" id="loginPassword" placeholder="Enter your password" required 
                                   class="w-full px-4 py-3 rounded-lg border-2 border-powerpuff-blue bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple text-lg">
                        </div>
                        <!-- Add the 2FA Code Input Field Here -->
                        <div id="twoFactorCodeContainer" style="display: none;" class="mb-4">
                            <label for="twoFactorCode" class="block text-white font-semibold mb-1">2FA Code</label>
                            <input type="text" id="twoFactorCode" placeholder="Enter 2FA code" 
                                   class="w-full px-4 py-2 rounded-lg border-2 border-powerpuff-blue bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple">
                        </div>
                        <button type="submit" class="w-full bg-powerpuff-blue hover:bg-powerpuff-purple text-white font-bold py-4 px-6 rounded-lg text-xl transition-colors">
                            Login
                        </button>
                    </form>
                    
                    <div class="text-center mt-6">
                        <p class="text-white">
                            Don't have an account? 
                            <button id="showRegistrationPage" class="text-powerpuff-pink hover:text-powerpuff-purple underline font-bold">Register here</button>
                        </p>
                    </div>
                    
                    <!-- Status Messages -->
                    <div id="loginStatus" class="mt-4 text-center hidden"></div>
                </div>
            </div>
        </div>

        <!-- Main App (After Authentication) -->
        <div id="mainApp" class="page bg-home" style="min-height: 100vh; position: relative;">
            <!-- Subtle overlay to improve text readability -->
            <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255, 255, 255, 0.2); z-index: 0; pointer-events: none;"></div>
            <!-- Navigation Bar -->
            <nav class="flex items-center justify-between px-8 py-4 bg-gray-600/70 backdrop-blur-sm border-b border-white/30 shadow-lg mb-4" style="position: relative; z-index: 10;">
                <div class="flex items-center space-x-4">
                    <img src="imgs/logo.png" alt="Powerpuff Girls Logo" class="h-12 w-auto" id="mainLogo">
                    <span class="text-3xl font-logo text-powerpuff-pink">Powerpuff Pong</span>
                </div>
                <ul class="flex space-x-6 text-lg font-bold">
                    <li><a href="#" id="navHome" class="hover:text-powerpuff-pink">Home</a></li>
                    <li><a href="#" id="navFriends" class="hover:text-powerpuff-blue">Friends</a></li>
                     <li><a href="#" id="navAnalytics" class="hover:text-powerpuff-purple">Dashboard</a></li>
                    <li><a href="#" id="navProfile" class="hover:text-powerpuff-green">Profile</a></li>
                    <li><a href="#" id="navLogout" class="hover:text-powerpuff-red">Logout</a></li>
                </ul>
            </nav>

            <!-- Home Section -->
            <div id="homeSection" class="section active" style="position: relative; z-index: 10;">
                <div class="container mx-auto px-4 py-8">
                    <!-- Welcome Message -->
                    <div class="text-center mb-12">
                        <h1 class="text-6xl font-logo text-white mb-4">
                            <span class="text-powerpuff-blue">Welcome to</span> <span class="text-powerpuff-pink">Powerpuff</span> <span class="text-powerpuff-blue">Pong</span>
                        </h1>
                        <p class="text-xl text-white opacity-90 mb-8">Ready to play the ultimate Pong experience?</p>
                        
                        <!-- Game Statistics -->
                        <div class="bg-gray-700/60 rounded-2xl p-12 border border-white/20 shadow-xl max-w-4xl mx-auto mb-8">
                            <h3 class="text-3xl font-bold text-white mb-6 text-center">Your Stats</h3>
                            <div class="flex justify-center space-x-8">
                                <div class="text-center">
                                    <div class="text-4xl font-bold text-powerpuff-pink" id="homeGamesPlayed">0</div>
                                    <div class="text-white text-lg">Games</div>
                                </div>
                                                                    <div class="text-center">
                                        <div class="text-4xl font-bold text-powerpuff-green" id="homeWins">0</div>
                                        <div class="text-white text-lg">Wins</div>
                                    </div>
                                    <div class="text-center">
                                        <div class="text-4xl font-bold text-powerpuff-blue" id="homeLosses">0</div>
                                        <div class="text-white text-lg">Losses</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Game Options Grid -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 max-w-4xl mx-auto">
                        <!-- 1 vs 1 Local Game -->
                        <div class="bg-gray-600/50 rounded-xl p-10 border border-white/20 transition-all duration-300 cursor-pointer transform hover:scale-105 hover:bg-gray-700/70 hover:shadow-xl group" data-game-type="1v1">
                            <div class="text-center">
                                <div class="w-8 h-8 bg-powerpuff-pink rounded-lg mx-auto mb-2 flex items-center justify-center transition-all duration-300 group-hover:scale-125 group-hover:rotate-6 group-hover:bg-white group-hover:shadow-md">
                                    <span class="text-sm group-hover:text-powerpuff-pink transition-colors">🎮</span>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-2 group-hover:text-powerpuff-pink transition-colors">1 vs 1</h3>
                                <p class="text-white text-base opacity-80 group-hover:opacity-100 transition-opacity">Local</p>
                            </div>
                        </div>

                        <!-- 1 vs AI -->
                        <div class="bg-gray-600/50 rounded-xl p-10 border border-white/20 transition-all duration-300 cursor-pointer transform hover:scale-105 hover:bg-gray-700/70 hover:shadow-xl group" data-game-type="1vAI">
                            <div class="text-center">
                                <div class="w-8 h-8 bg-powerpuff-blue rounded-lg mx-auto mb-2 flex items-center justify-center transition-all duration-300 group-hover:scale-125 group-hover:-rotate-6 group-hover:bg-white group-hover:shadow-md">
                                    <span class="text-sm group-hover:text-powerpuff-blue transition-colors">🤖</span>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-2 group-hover:text-powerpuff-blue transition-colors">1 vs AI</h3>
                                <p class="text-white text-base opacity-80 group-hover:opacity-100 transition-opacity">Computer</p>
                            </div>
                        </div>

                        <!-- Online Game -->
                        <div class="bg-gray-600/50 rounded-xl p-10 border border-white/20 transition-all duration-300 cursor-pointer transform hover:scale-105 hover:bg-gray-700/70 hover:shadow-xl group" data-game-type="online">
                            <div class="text-center">
                                <div class="w-8 h-8 bg-powerpuff-green rounded-lg mx-auto mb-2 flex items-center justify-center transition-all duration-300 group-hover:scale-125 group-hover:rotate-6 group-hover:bg-white group-hover:shadow-md">
                                    <span class="text-sm group-hover:text-powerpuff-green transition-colors">🔗</span>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-2 group-hover:text-powerpuff-green transition-colors">Remote Game</h3>
                                <p class="text-white text-base opacity-80 group-hover:opacity-100 transition-opacity">Direct Connect</p>
                            </div>
                        </div>

                        <!-- Tournament -->
                        <div class="bg-gray-600/50 rounded-xl p-10 border border-white/20 transition-all duration-300 cursor-pointer transform hover:scale-105 hover:bg-gray-700/70 hover:shadow-xl group" data-game-type="tournament">
                            <div class="text-center">
                                <div class="w-8 h-8 bg-powerpuff-purple rounded-lg mx-auto mb-2 flex items-center justify-center transition-all duration-300 group-hover:scale-125 group-hover:-rotate-6 group-hover:bg-white group-hover:shadow-md animate-pulse">
                                    <span class="text-xs group-hover:text-powerpuff-purple transition-colors">🏆</span>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-2 group-hover:text-powerpuff-purple transition-colors">Tournament</h3>
                                <p class="text-white text-base opacity-80 group-hover:opacity-100 transition-opacity">Competitive</p>
                            </div>
                        </div>
                    </div>

                    <!-- Game Instructions -->
                    <div class="mt-12 text-center">
                        <h2 class="text-3xl font-logo text-white mb-4">How to Play</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                            <div class="bg-gray-600/50 rounded-lg p-10">
                                <h3 class="text-2xl font-bold text-white mb-4">Local Game (1v1)</h3>
                                <p class="text-white text-lg">You play with W/S keys</p>
                                <p class="text-white text-lg">Other player uses Up/Down arrow keys</p>
                            </div>
                            <div class="bg-gray-600/50 rounded-lg p-10">
                                <h3 class="text-2xl font-bold text-white mb-4">Remote Game</h3>
                                <p class="text-white text-lg">Direct connection to specific match</p>
                                <p class="text-white text-lg">Use W/S or Arrow keys</p>
                            </div>
                        </div>
                    </div>

                    <!-- Game Status Messages -->
                    <div id="gameStatus" class="mt-8 text-center hidden"></div>
                    
                </div>
            </div>

            <!-- Local Tournament Section -->
            <div id="localTournamentSection" class="section">
                <div class="container mx-auto px-4 py-8">
                    <div class="max-w-4xl mx-auto">
                        <h2 class="text-4xl font-logo text-powerpuff-purple mb-6 text-center">🏆 Local Tournament</h2>
                        
                        <!-- Tournament Setup -->
                        <div class="bg-gray-600/50 rounded-2xl p-8 border border-white/30 shadow-xl mb-6">
                            <h3 class="text-2xl font-bold text-white mb-4 text-center">Tournament Setup</h3>
                            
                            <!-- Player Count Selection -->
                            <div class="mb-6">
                                <div class="flex justify-center space-x-4">
                                    <button type="button" id="tournament4Players" class="bg-powerpuff-pink hover:bg-powerpuff-purple text-white font-bold py-3 px-6 rounded-lg transition-colors border-2 border-white/30">
                                        4 Players
                                </div>
                            </div>

                            <!-- Player Names Form -->
                            <div id="playerNamesForm" class="hidden">
                                <h4 class="text-xl font-bold text-white mb-4 text-center">Enter Player Names</h4>
                                <div id="playerInputs" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                    <!-- Player inputs will be generated here -->
                                </div>
                                <div class="text-center">
                                    <button type="button" id="startTournament" class="bg-powerpuff-green hover:bg-powerpuff-purple text-white font-bold py-3 px-8 rounded-lg transition-colors text-lg">
                                        🏆 Start Tournament
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Tournament Bracket -->
                        <div id="tournamentBracket" class="bg-gray-600/50 rounded-2xl p-8 border border-white/30 shadow-xl mb-6 hidden">
                            <h3 class="text-2xl font-bold text-white mb-4 text-center">Tournament Bracket</h3>
                            <div id="bracketContainer" class="flex justify-center">
                                <!-- Bracket will be generated here -->
                            </div>
                        </div>

                        <!-- Current Match -->
                        <div id="currentMatch" class="bg-gray-600/50 rounded-2xl p-8 border border-white/30 shadow-xl mb-6 hidden">
                            <h3 class="text-2xl font-bold text-white mb-4 text-center">Current Match</h3>
                            <div id="matchInfo" class="text-center text-white text-lg mb-4">
                                <!-- Match info will be displayed here -->
                            </div>
                            <div class="text-center">
                                <button type="button" id="startMatch" class="bg-powerpuff-green hover:bg-powerpuff-purple text-white font-bold py-3 px-8 rounded-lg transition-colors text-lg">
                                    🎮 Start Match
                                </button>
                            </div>
                        </div>

                        <!-- Match Results -->
                        <div id="matchResults" class="bg-gray-600/50 rounded-2xl p-8 border border-white/30 shadow-xl mb-6 hidden">
                            <h3 class="text-2xl font-bold text-white mb-4 text-center">Match Results</h3>
                            <div id="resultsInfo" class="text-center text-white text-lg mb-4">
                                <!-- Results will be displayed here -->
                            </div>
                            <div class="text-center">
                                <button type="button" id="nextMatch" class="bg-powerpuff-blue hover:bg-powerpuff-purple text-white font-bold py-3 px-8 rounded-lg transition-colors text-lg">
                                    ➡️ Next Match
                                </button>
                            </div>
                        </div>

                        <!-- Tournament Results -->
                        <div id="tournamentResults" class="bg-gray-600/50 rounded-2xl p-8 border border-white/30 shadow-xl hidden">
                            <h3 class="text-2xl font-bold text-white mb-4 text-center">🏆 Tournament Champion</h3>
                            <div id="championInfo" class="text-center text-white text-lg mb-4">
                                <!-- Champion will be displayed here -->
                            </div>
                            <div class="text-center">
                                <button type="button" id="newTournament" class="bg-powerpuff-green hover:bg-powerpuff-purple text-white font-bold py-3 px-8 rounded-lg transition-colors text-lg">
                                    🏆 New Tournament
                                </button>
                            </div>
                        </div>

                        <!-- Status Messages -->
                        <div id="tournamentStatus" class="mt-4 text-center hidden"></div>
                    </div>
                </div>
            </div>

            <!-- Friends Section -->
            <div id="friendsSection" class="section">
                <div class="container mx-auto px-4 py-8">
                    <div class="max-w-6xl mx-auto">
                        
                        <!-- Search Users Section -->
                        <div class="bg-gray-600/50 rounded-2xl p-6 border border-white/30 shadow-xl mb-6">
                            <h3 class="text-2xl font-bold text-white mb-4">🔍 Search Users</h3>
                            <div class="mb-4">
                                <input type="text" id="searchUsersInput" placeholder="Search users by username..." 
                                       class="w-full px-4 py-2 rounded-lg border-2 border-powerpuff-blue bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple">
                            </div>
                            <div id="usersList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- Users will be populated here -->
                            </div>
                        </div>

                        <!-- Friends Management Grid -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            
                            <!-- My Friends -->
                            <div class="bg-gray-600/50 rounded-2xl p-6 border border-white/30 shadow-xl">
                                <h3 class="text-2xl font-bold text-white mb-4">👥 My Friends</h3>
                                <div id="friendsList" class="space-y-3">
                                    <div class="text-center text-white">
                                        <div class="text-4xl mb-2">👥</div>
                                        <p>No friends yet</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Friend Requests -->
                            <div class="bg-gray-600/50 rounded-2xl p-6 border border-white/30 shadow-xl">
                                <h3 class="text-2xl font-bold text-white mb-4">📨 My Requests</h3>
                                <div id="friendRequests" class="space-y-3">
                                    <div class="text-center text-white">
                                        <div class="text-4xl mb-2">📨</div>
                                        <p>No pending requests</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Status Messages -->
                        <div id="friendsStatus" class="mt-4 text-center hidden"></div>
                    </div>
                </div>
            </div>

            <!-- Tournaments Section -->
            <div id="tournamentsSection" class="section">
                <div class="container mx-auto px-4 py-8">
                    <div class="max-w-4xl mx-auto bg-gray-600/50 rounded-2xl p-6 border border-white/30 shadow-xl">
                        <h2 class="text-4xl font-logo text-powerpuff-green mb-6 text-center">Tournaments</h2>
                        
                        <!-- Create Tournament -->
                        <div class="mb-6 p-4 bg-gray-600/50 rounded-xl border border-white/30">
                            <h3 class="text-xl font-bold text-white mb-4">Create Tournament</h3>
                            <form id="createTournamentForm" class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <input type="text" id="tournamentName" placeholder="Tournament Name" required 
                                               class="w-full px-3 py-2 rounded border-2 border-powerpuff-green bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple">
                                    </div>
                                    <div>
                                        <input type="number" id="maxPlayers" placeholder="Max Players" min="2" max="16" value="8" required 
                                               class="w-full px-3 py-2 rounded border-2 border-powerpuff-green bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple">
                                    </div>
                                </div>
                                <button type="submit" class="bg-powerpuff-green hover:bg-powerpuff-purple text-white font-bold py-2 px-4 rounded transition-colors">
                                    Create Tournament
                                </button>
                            </form>
                        </div>

                        <!-- Active Tournaments -->
                        <div class="mb-6">
                            <h3 class="text-xl font-bold text-white mb-4">Active Tournaments</h3>
                            <div id="activeTournaments" class="space-y-4">
                                <p class="text-white text-center">No active tournaments</p>
                            </div>
                        </div>

                        <!-- Join Tournament -->
                        <div class="mb-6 p-4 bg-gray-600/50 rounded-xl border border-white/30">
                            <h3 class="text-xl font-bold text-white mb-4">Join Tournament</h3>
                            <form id="joinTournamentForm" class="flex gap-2">
                                <input type="text" id="tournamentId" placeholder="Enter Tournament ID" required 
                                       class="flex-1 px-3 py-2 rounded border-2 border-powerpuff-green bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple">
                                <button type="submit" class="bg-powerpuff-green hover:bg-powerpuff-purple text-white font-bold py-2 px-4 rounded transition-colors">
                                    Join
                                </button>
                            </form>
                        </div>

                        <!-- Status Messages -->
                        <div id="tournamentsStatus" class="mt-4 text-center hidden"></div>
                    </div>
                </div>
            </div>

            <!-- Profile Section -->
            <div id="profileSection" class="section">
                <div class="container mx-auto px-4 py-8">
                    <div class="max-w-2xl mx-auto">
                        <!-- Profile Header -->
                        <div class="bg-gray-600/50 rounded-2xl p-6 border border-white/30 shadow-xl text-center mb-6">
                            <div class="relative inline-block">
                                <img id="profileAvatar" src="https://ui-avatars.com/api/?name=Player" alt="Avatar" class="mx-auto h-24 w-24 rounded-full mb-4 border-4 border-white border-opacity-30 object-cover">
                                <div class="absolute -bottom-2 -right-2">
                                    <label for="avatarUpload" class="cursor-pointer">
                                        <div class="w-8 h-8 bg-powerpuff-pink rounded-full flex items-center justify-center hover:bg-powerpuff-purple transition-colors">
                                            <span class="text-white text-sm">📷</span>
                                        </div>
                                    </label>
                                    <input type="file" id="avatarUpload" accept="image/*" class="hidden">
                                </div>
                            </div>
                            <div class="text-white text-2xl font-bold mb-2" id="profileUsername">Player</div>
                            <div class="text-white text-lg mb-2" id="profileEmail"></div>
                            
                            <!-- Availability Status -->
                            <div class="flex items-center justify-center mb-4">
                                <div class="w-3 h-3 bg-green-400 rounded-full mr-2 animate-pulse"></div>
                                <span class="text-white text-sm font-medium">Online Status</span>
                            </div>
                            
                            <div class="grid grid-cols-3 gap-4 text-center">
                                <div class="bg-white/20 rounded-xl p-4 backdrop-blur-md border border-white/20">
                                    <div class="text-white text-2xl font-bold" id="profileGames">0</div>
                                    <div class="text-white text-sm">Games Played</div>
                                </div>
                                <div class="bg-white/20 rounded-xl p-4 backdrop-blur-md border border-white/20">
                                    <div class="text-white text-2xl font-bold" id="profileWins">0</div>
                                    <div class="text-white text-sm">Wins</div>
                                </div>
                                <div class="bg-white/20 rounded-xl p-4 backdrop-blur-md border border-white/20">
                                    <div class="text-white text-2xl font-bold" id="profileLosses">0</div>
                                    <div class="text-white text-sm">Losses</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Profile Settings -->
                        <div class="bg-gray-600/50 rounded-2xl p-6 border border-white/30 shadow-xl">
                            <h3 class="text-2xl font-bold text-white mb-6 text-center">Profile Settings</h3>
                            
                            <!-- Change Username -->
                            <div class="mb-6">
                                <label class="block text-white font-semibold mb-2">Username</label>
                                <div class="flex gap-2">
                                    <input type="text" id="newUsername" placeholder="Enter new username" class="flex-1 px-4 py-2 rounded-lg border-2 border-powerpuff-blue bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple">
                                    <button id="changeUsernameBtn" class="bg-powerpuff-blue hover:bg-powerpuff-purple text-white font-semibold py-2 px-4 rounded-lg transition-colors">
                                        Change
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Change Password -->
                            <div class="mb-6">
                                <label class="block text-white font-semibold mb-2">Change Password</label>
                                <div class="space-y-3">
                                    <input type="password" id="currentPassword" placeholder="Enter current password" class="w-full px-4 py-2 rounded-lg border-2 border-powerpuff-blue bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple">
                                    <input type="password" id="newPassword" placeholder="Enter new password" class="w-full px-4 py-2 rounded-lg border-2 border-powerpuff-blue bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple">
                                    <div id="passwordRequirements" class="mt-2 text-xs text-white">
                                        <p>Password must have: at least 8 characters, one lowercase letter, one uppercase letter, one number, one special character</p>
                                    </div>
                                    <button id="changePasswordBtn" class="w-full bg-powerpuff-blue hover:bg-powerpuff-purple text-white font-semibold py-2 px-4 rounded-lg transition-colors">
                                        Change Password
                                    </button>
                                </div>
                            </div>
                            
                            <!-- 2FA Toggle -->
                            <div class="mb-6">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <label class="block text-white font-semibold mb-1">Two-Factor Authentication</label>
                                        <p class="text-white text-sm opacity-80">Add an extra layer of security</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="twoFactorToggle" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-powerpuff-green"></div>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- 2FA Setup Section -->
                            <div id="twofa-setup" style="display: none;">
                                <h3 class="text-white font-semibold mb-2">Scan the QR Code</h3>
                                <img id="qrImage" alt="QR Code" class="mb-4">
                                <h3 class="text-white font-semibold mb-2">Backup Codes</h3>
                                <ul id="backupCodes" class="text-white text-sm"></ul>
                                <button id="copyBackupCodes" class="bg-powerpuff-blue hover:bg-powerpuff-purple text-white font-semibold py-2 px-4 rounded-lg transition-colors">
                                    Copy Backup Codes
                                </button>
                            </div>

                            <!-- 2FA Setup Section -->
                            <div id="twofaSetupSection" style="display: none;">
                                <h3 class="text-white font-semibold mb-2">Scan the QR Code</h3>
                                <img id="qrCodeImage" alt="QR Code" class="mb-4">
                                <p class="text-white text-sm mb-4">Scan this QR code with your authenticator app (e.g., Duo Mobile).</p>
                                <h3 class="text-white font-semibold mb-2">Enter the Code</h3>
                                <input type="text" id="twoFactorCodeInput" placeholder="Enter the 2FA code" 
                                       class="w-full px-4 py-2 rounded-lg border-2 border-powerpuff-blue bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-70 focus:outline-none focus:border-powerpuff-purple">
                                <button id="verify2faBtn" class="bg-powerpuff-blue hover:bg-powerpuff-purple text-white font-semibold py-2 px-4 rounded-lg transition-colors">
                                    Verify 2FA
                                </button>
                            </div>

                            <!-- GDPR Actions -->
                            <div id="gdpr-actions" class="mt-6">
                                <button id="deleteAccountBtn" class="btn btn-danger">Delete Account</button>
                                <button id="anonymizeAccountBtn" class="btn btn-warning">Anonymize Account</button>
                                <button id="downloadDataBtn" class="btn btn-primary">Download My Data</button>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div id="dashboardSection" class="section">
                <div class="container mx-auto px-4 py-8">
                    <div class="max-w-6xl mx-auto">
                        <h2 class="text-4xl font-logo text-powerpuff-purple mb-6 text-center">📊 Dashboard</h2>
                        
                        <!-- Dashboard content will be loaded here -->
                        <div class="bg-gray-600/50 rounded-2xl p-6 border border-white/30 shadow-xl">
                            <div class="text-center text-white">
                                <div class="text-4xl mb-4">📊</div>
                                <h3 class="text-2xl font-bold mb-4">Analytics Dashboard</h3>
                                <p class="text-lg opacity-80">Your gaming statistics and performance metrics</p>
                                <div class="mt-6">
                                    <a href="/dashboard.html" class="bg-powerpuff-purple hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                                        View Full Dashboard
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Game Section -->
            <div id="gameSection" class="section">
                <div class="container mx-auto px-4 py-8">
                    <!-- Score Display -->
                    <div class="text-center text-white mb-8">
                        <div class="flex justify-center space-x-4">
                            <div class="bg-powerpuff-pink bg-opacity-50 rounded-lg p-4">
                                <h3 class="text-lg font-bold">Score</h3>
                                <div class="flex justify-center space-x-8">
                                    <div>
                                        <p class="text-sm" id="player1Name">Player 1</p>
                                        <p id="player1Score" class="text-2xl font-bold">0</p>
                                    </div>
                                    <div>
                                        <p class="text-sm" id="player2Name">Player 2</p>
                                        <p id="player2Score" class="text-2xl font-bold">0</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Game Container -->
                    <div class="flex justify-center mb-8">
                        <div class="relative bg-black rounded-lg shadow-2xl border-4 border-powerpuff-purple">
                            <!-- Customize Button - Top Left -->
                            <button id="customizeBtn" class="absolute top-4 left-4 z-20 bg-gradient-to-r from-blue-400 to-purple-500 hover:from-blue-500 hover:to-purple-600 text-white font-bold py-2 px-4 rounded-full text-sm transition-all transform hover:scale-105 shadow-lg">
                                🎨 Customize
                            </button>
                            
                            <canvas id="gameCanvas" width="800" height="600" class="rounded-lg"></canvas>
                            
                            <!-- Game Overlay -->
                            <div id="gameOverlay" class="absolute inset-0 flex items-center justify-center rounded-lg z-10" style="display: flex !important; align-items: center; justify-content: center; flex-direction: column;">
                                <div class="text-center w-full flex flex-col items-center justify-center">
                                    <h2 id="gameMessage" class="text-3xl font-bold mb-6 text-white drop-shadow-lg"></h2>
                                    <button id="startButton" class="bg-powerpuff-pink hover:bg-powerpuff-purple text-white font-bold py-3 px-6 rounded-full text-xl transition-colors shadow-lg">
                                        Start Game
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Online Game Section -->
            <div id="onlineGameSection" class="section">
                <div class="container mx-auto px-4 py-8">
                    <!-- Matchmaking Status -->
                    <div class="text-center text-white mb-8">
                        <h2 class="text-4xl font-logo text-powerpuff-green mb-4">🔗 Remote Game</h2>
                    </div>

                    <!-- Online Score Display - At the top -->
                    <div id="onlineScoreDisplay" class="text-center text-white mb-8" style="display: block;">
                        <div class="flex justify-center space-x-4">
                            <div class="bg-powerpuff-pink bg-opacity-50 rounded-lg p-4">
                                <h3 class="text-lg font-bold">Score</h3>
                                <div class="flex justify-center space-x-8">
                                    <div>
                                        <p class="text-sm" id="onlinePlayer1Name">Waiting...</p>
                                        <p id="onlinePlayer1Score" class="text-2xl font-bold">0</p>
                                    </div>
                                    <div>
                                        <p class="text-sm" id="onlinePlayer2Name">Waiting...</p>
                                        <p id="onlinePlayer2Score" class="text-2xl font-bold">0</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Online Game Container -->
                    <div class="flex justify-center mb-8">
                        <div class="relative bg-black rounded-lg shadow-2xl border-4 border-powerpuff-green">
                            <!-- Customize Button - Top Left -->
                            <button id="onlineCustomizeBtn" class="absolute top-4 left-4 z-20 bg-gradient-to-r from-blue-400 to-purple-500 hover:from-blue-500 hover:to-purple-600 text-white font-bold py-2 px-4 rounded-full text-sm transition-all transform hover:scale-105 shadow-lg">
                                🎨 Customize
                            </button>
                            
                            <canvas id="onlineGameCanvas" width="800" height="600" class="rounded-lg"></canvas>
                            
                            <!-- Online Game Overlay -->
                            <div id="onlineGameOverlay" class="absolute inset-0 flex items-center justify-center rounded-lg z-10" style="display: none;">
                                <div class="text-center">
                                    <h2 id="onlineGameMessage" class="text-3xl font-bold mb-6 text-white drop-shadow-lg"></h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Customization Modal -->
            <div id="customizeModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
                    <div class="text-center mb-6">
                        <h3 class="text-2xl font-bold text-gray-800 mb-2">🎨 Customize Your Game</h3>
                        <p class="text-gray-600">Choose your favorite colors!</p>
                    </div>
                    
                    <!-- Table Color Section -->
                    <div class="mb-6">
                        <h4 class="text-lg font-semibold text-gray-700 mb-3">Table Color</h4>
                        <div class="grid grid-cols-4 gap-3">
                            <button class="color-option bg-blue-900 hover:bg-blue-800 w-12 h-12 rounded-full border-2 border-gray-300 hover:border-gray-400 transition-all" data-color="#0f0f23" data-type="table"></button>
                            <button class="color-option bg-purple-900 hover:bg-purple-800 w-12 h-12 rounded-full border-2 border-gray-300 hover:border-gray-400 transition-all" data-color="#2d1b69" data-type="table"></button>
                            <button class="color-option bg-green-900 hover:bg-green-800 w-12 h-12 rounded-full border-2 border-gray-300 hover:border-gray-400 transition-all" data-color="#1a472a" data-type="table"></button>
                            <button class="color-option bg-red-900 hover:bg-red-800 w-12 h-12 rounded-full border-2 border-gray-300 hover:border-gray-400 transition-all" data-color="#4a1c1c" data-type="table"></button>
                        </div>
                    </div>
                    
                    <!-- Paddle Color Section -->
                    <div class="mb-6">
                        <h4 class="text-lg font-semibold text-gray-700 mb-3">Paddle Colors</h4>
                        <div class="grid grid-cols-4 gap-3">
                            <button class="color-option bg-red-500 hover:bg-red-400 w-12 h-12 rounded-full border-2 border-gray-300 hover:border-gray-400 transition-all" data-color="#e94560" data-type="paddle"></button>
                            <button class="color-option bg-blue-500 hover:bg-blue-400 w-12 h-12 rounded-full border-2 border-gray-300 hover:border-gray-400 transition-all" data-color="#3b82f6" data-type="paddle"></button>
                            <button class="color-option bg-green-500 hover:bg-green-400 w-12 h-12 rounded-full border-2 border-gray-300 hover:border-gray-400 transition-all" data-color="#10b981" data-type="paddle"></button>
                            <button class="color-option bg-purple-500 hover:bg-purple-400 w-12 h-12 rounded-full border-2 border-gray-300 hover:border-gray-400 transition-all" data-color="#8b5cf6" data-type="paddle"></button>
                        </div>
                    </div>
                    
                    <!-- Close Button -->
                    <div class="text-center">
                        <button id="closeCustomizeBtn" class="bg-gradient-to-r from-gray-400 to-gray-600 hover:from-gray-500 hover:to-gray-700 text-white font-bold py-3 px-8 rounded-full transition-all transform hover:scale-105">
                            ✨ Done
                        </button>
                    </div>
                </div>
            </div>

            <!-- Game Over Modal -->
            <div id="gameOverModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
                    <div class="text-center mb-6">
                        <div id="gameOverIcon" class="text-6xl mb-4">🏆</div>
                        <h3 id="gameOverTitle" class="text-2xl font-bold text-gray-800 mb-2">Game Over!</h3>
                        <p id="gameOverMessage" class="text-gray-600 mb-4">The game has ended</p>
                        
                        <!-- Score Display -->
                        <div class="bg-gray-100 rounded-lg p-4 mb-6">
                            <div class="flex justify-center space-x-8">
                                <div class="text-center">
                                    <p class="text-sm text-gray-600" id="gameOverPlayer1Name">Player 1</p>
                                    <p id="gameOverPlayer1Score" class="text-2xl font-bold text-gray-800">0</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-sm text-gray-600" id="gameOverPlayer2Name">Player 2</p>
                                    <p id="gameOverPlayer2Score" class="text-2xl font-bold text-gray-800">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="flex space-x-4">
                        <button id="playAgainBtn" class="flex-1 bg-powerpuff-green hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                            🎮 Play Again
                        </button>
                        <button id="goHomeBtn" class="flex-1 bg-powerpuff-blue hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                            🏠 Go Home
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="./dist/main.js?v=1756785022"></script>
</body>
</html>